# FamilyPact (家庭公约) 🏠✨

> 一个极简、优雅的家庭任务与积分管理系统，采用 iOS 原生设计美学。

FamilyPact 旨在帮助家庭建立健康的日常习惯，通过可视化的积分系统鼓励孩子完成生活、学习和劳动任务。它拥有媲美原生 iOS 应用的流畅体验和精致 UI。

## ✨ 核心特性

- **🍎 iOS 极致美学**: 深度复刻 iOS 设计语言，包含毛玻璃特效、平滑动画、触觉反馈和黑暗模式。
- **📝 多维任务管理**:
  - **生活 (Living)**: 运动、早起、用餐习惯等。
  - **学习 (Learning)**: 作业、阅读、练琴等。
  - **劳动 (Labor)**: 家务分担、整理收纳。
- **💬 家庭交流中心 (NEW)**:
  - **公共公告**: 家长可发布全家可见的通知。
  - **私密留言**: 孩子与父母之间的 1-on-1 悄悄话，支持隐私隔离（爸爸看不见孩子给妈妈的留言）。
  - **管理权限**: 家长支持单条消息删除及一键清空。
  - **智能时间**: 自动识别当天消息，带有时钟图标的温馨日期提示。
- **🏆 积分与奖励系统**:
  - **星星嘉奖**: 家长可为出色表现授予“嘉奖星星”，伴随 3D 卡片庆祝动效。
  - **撤销机制**: 完善的撤销逻辑，支持当日星星回滚及当日记录全面重置（后悔药）。
  - **时间券兑换**: 积分自动兑换平板使用时间券。
- **🔒 权限与安全**: 基于 PIN 码的家长模式，支持身份快速切换。
- **📊 趋势分析**: 周数据可视化图表，追踪成长点滴。

## 🛠️ 技术栈

- **前端**: 原生 HTML5, CSS3, Vanilla JavaScript (ES6+)。
- **存储与 API**: Neon (Serverless Postgres) + Cloudflare Workers。
- **部署**: [Cloudflare Pages](https://pages.cloudflare.com/)。
- **架构**: 零框架依赖，毫秒级加载。

## 🚀 快速开始

1. **环境**: 安装 Node.js 和 Wrangler。
2. **开发**: `npx wrangler pages dev .`
3. **部署**: `npx wrangler pages deploy .`

## 📂 项目结构

```
FamilyPact/
├── chat.js         # 交流中心核心逻辑
├── main.js         # 仪表盘、任务与全局系统逻辑
├── style.css       # iOS 设计系统 (含 2000+ 行精心雕琢的样式)
├── data.js         # 任务与奖励配置
├── functions/      # 后端 API (Messages, Logs, Sessions, Auth)
└── index.html      # 页面入口
```

## 📄 更新日志 (根据 Commits)

- **v1.2.0**: 强化交流中心：新增单条删除、公告默认首选、隐私隔离、智能日期。
- **v1.1.5**: 强化逻辑：新增嘉奖星星撤销功能及当日记录全面重置。
- **v1.1.0**: 3D 庆祝系统：授予星星时弹出精致动效。
- **v1.0.0**: iOS 设计风格重构完成，任务系统上线。

## 📄 许可证

MIT License
